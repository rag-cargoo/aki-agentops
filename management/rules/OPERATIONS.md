# ⚙️ 운영 및 자동화 표준 (Operations & Automation Standards)

> **Core Philosophy**: "복잡한 수동 명령어를 지양하고, 모든 운영 작업은 명문화된 스크립트와 Makefile을 통해 수행한다."

---

## 1. Makefile 운영 원칙 (Makefile Standards)

명령어 추상화와 자동화를 위해 각 서비스의 루트 디렉토리에 `Makefile`을 배치한다.

*   **배치 위치**: 전사 공통 작업은 프로젝트 루트에, **개별 서비스 전용 작업은 각 서비스 루트**(`workspace/apps/{service}/`)에 Makefile을 둔다.
*   **진입점 일원화**: 빌드, 테스트, 배포, 권한 설정 등은 개별 명령어를 외울 필요 없이 `make [명령어]` 체계로 관리한다.
*   **Help 제공**: `make help` (또는 기본 `make`) 실행 시 가용한 모든 명령어 리스트와 설명을 출력해야 한다.
*   **추상화**: 복잡한 `docker-compose` 명령어 나 `curl` 명령 등은 사용자가 알 필요 없게 Makefile 뒤로 숨긴다.

---

## 2. 스크립트 관리 표준 (Scripting Standards)

모든 스크립트는 `scripts/` 폴더 하위의 용도별 디렉토리에 관리한다.

### 폴더 분류 체계
*   **`api/`**: 단위 API 호출 및 기능 테스트용.
*   **`bench/`**: 성능 테스트, 부하 테스트, 동시성 시뮬레이션용.
*   **`common/`**: 공통 환경 변수(`env.sh`) 및 유틸리티 함수.
*   **`infra/`**: 도커 컨테이너 관리, DB 초기화 등 인프라 조작용.

### 스크립트 작성 필수 요건
1.  **가이드 주석 필수**: 스크립트 상단에 **[목적, 설정 안내, 필수 환경]**을 명시한다.
2.  **설정의 중앙화**: 개별 스크립트에 하드코딩하지 말고 `scripts/common/env.sh`를 `source`하여 사용한다.
3.  **가시성 확보 (Pre-check)**: 스크립트 실행 직후, 현재 적용된 **환경 변수값(Target URL, ID 등)을 반드시 출력**하여 오작동을 방지한다.
4.  **멱등성 유지**: 여러 번 실행해도 시스템에 부작용이 없거나, 안전하게 실패하도록 설계한다.

---

## 3. 권한 및 실행 표준 (Execution)

*   **자동 권한 부여**: 신규 스크립트 추가 시 `make setup` 명령어에 `chmod +x` 로직을 추가하여 팀원이 즉시 사용할 수 있게 한다.
*   **경로 독립성**: `$(dirname "$0")` 등을 사용하여 스크립트가 어디서 호출되든 파일 시스템 경로 문제가 발생하지 않도록 한다.
