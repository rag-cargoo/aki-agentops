# Issue-PR Flow

## 목적
- 작업 단위를 Issue에서 시작해 브랜치/PR로 연결하고 종료 상태를 일관되게 관리한다.
- 같은 작업 축에서 이슈 중복 생성을 방지한다.

## 트리거
- 새 실행 작업이 정의되었는데 추적 이슈가 없는 경우
- 기존 이슈에 연결된 구현 PR이 필요한 경우
- 기존 이슈 close 이후 후속 보강/회귀 대응이 필요한 경우

## 표준 순서
1. 기존 이슈 우선 탐색:
   - 키워드로 open/closed 이슈를 검색한다.
   - 같은 범위면 기존 이슈 갱신 또는 reopen을 우선한다.
2. Lifecycle 결정:
   - Reopen/Update Existing(기본)
   - New Issue(범위가 달라진 예외)
3. 이슈 본문/로그 정리:
   - 기존 본문은 보존한다.
   - 변경사항/진행단계는 코멘트로 누적한다.
4. 작업 브랜치 생성:
   - 브랜치명은 이슈 목적이 드러나게 작성한다.
5. 구현/문서 작업 후 커밋:
   - 변경 요약과 검증 결과를 커밋/PR 본문에 포함한다.
6. PR 생성:
   - `Refs #<issue>` 또는 `Closes #<issue>`로 이슈 연결.
7. 리뷰/체크 통과 후 머지:
   - 머지 방식은 저장소 정책을 따른다.
8. 종료 정리:
   - 이슈 상태/회의록 링크/필요 코멘트를 동기화한다.

## 분기 규칙
- 같은 범위 작업:
  - 기존 이슈 open이면 코멘트 누적, closed면 reopen 후 진행
- 새 이슈 생성이 필요한 경우:
  - 기존 이슈 재오픈이 아닌 이유를 이슈/PR에 명시
- 문서만 변경되는 경우:
  - PR은 생성하되 체크 미구성 시 수동 검토 결과를 본문에 남긴다.
- 구현 미착수 상태:
  - 이슈만 open 유지, PR은 생성하지 않는다.
- 긴급 수정:
  - 최소 검증으로 hotfix 진행 후 후속 검증 작업 이슈를 별도 등록한다.

## 자동화 권장
1. 이슈 업서트:
   - `skills/aki-mcp-github/scripts/issue-upsert.sh`
2. 정책 기준:
   - `references/issue-lifecycle-policy.md`

## Done(3분할)
- Completion:
  - 이슈-브랜치-PR 연결이 완료됨
- Verification:
  - 필수 체크/리뷰 정책 충족
- Evidence:
  - 이슈 링크, PR 링크, 머지/상태 로그
