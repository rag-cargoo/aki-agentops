# ⚙️ 운영 및 자동화 표준 (Operations & Automation Standards)

> **Core Philosophy**: "복잡한 수동 명령어를 지양하고, 모든 운영 작업은 명문화된 스크립트와 Makefile을 통해 수행한다."

---

## 1. Makefile 운영 원칙 (Makefile Standards)

명령어 추상화와 자동화를 위해 각 서비스의 루트 디렉토리에 `Makefile`을 배치한다.

*   **배치 위치**: 전사 공통 작업은 프로젝트 루트에, **개별 서비스 전용 작업은 각 서비스 루트**(`workspace/apps/{service}/`)에 Makefile을 둔다.
*   **진입점 일원화**: 빌드, 테스트, 배포, 권한 설정 등은 개별 명령어를 외울 필요 없이 `make [명령어]` 체계로 관리한다.
*   **Help 제공**: `make help` (또는 기본 `make`) 실행 시 가용한 모든 명령어 리스트와 설명을 출력해야 한다.
*   **추상화**: 복잡한 `docker-compose` 명령어 나 `curl` 명령 등은 사용자가 알 필요 없게 Makefile 뒤로 숨긴다.

---

## 2. 스크립트 관리 표준 (Scripting Standards)

모든 스크립트는 `scripts/` 폴더 하위의 용도별 디렉토리에 관리한다.

### 폴더 분류 체계
*   **`api/`**: 쉘 스크립트(.sh) 기반의 자동화 테스트.
*   **`http/`**: IDE용 HTTP Client(.http) 기반의 개발자 실시간 테스트.
*   **`bench/`**: 성능 및 부하 테스트.
*   **`common/`**: 공통 환경 변수(`env.sh`).

### 스크립트 작성 필수 요건
1.  **가이드 주석 필수**: [목적, 설정 안내, 필수 환경] 명시.
2.  **테스트 격리 및 자가 완결성 (Self-Contained)**: 
    *   테스트 실행 전 **필요한 데이터(유저 등)를 API로 직접 생성**한다.
    *   테스트 종료 후 **생성된 데이터를 삭제(Cleanup)**하여 DB 정합성을 유지한다.
3.  **설정의 중앙화**: `scripts/common/env.sh` 사용.
4.  **가시성 확보**: 실행 직후 현재 환경 변수값 출력.


---

## 3. 권한 및 실행 표준 (Execution)

*   **자동 권한 부여**: 신규 스크립트 추가 시 `make setup` 명령어에 `chmod +x` 로직을 추가하여 팀원이 즉시 사용할 수 있게 한다.
*   **경로 독립성**: `$(dirname "$0")` 등을 사용하여 스크립트가 어디서 호출되든 파일 시스템 경로 문제가 발생하지 않도록 한다.

---

## 4. 스킬 관리 및 동기화 표준 (Skill Management & Sync)

Gemini CLI의 지능을 확장하는 '스킬(Skill)'은 개발 소스와 런타임 환경을 분리하여 관리한다.

### 런타임 분리의 이유

*   **시스템 인식**: Gemini CLI는 프로젝트 로컬의 `.gemini/skills/` 디렉토리를 스킬 로드 경로로 우선 참조한다.

*   **실시간 동기화 (Symbolic Link)**: 개발 소스(`skills/`)와 런타임(`.gemini/skills/`)을 심볼릭 링크로 연결하여, 문서 수정 시 즉시 제미나이가 인식할 수 있도록 한다.

*   **지식 갱신 제어**: 링크를 통해 파일은 즉시 동기화되지만, 실제 에이전트의 지능에 반영되는 시점은 `/skills reload` 명령어로 제어한다.



### 동기화 워크플로우 (Link & Reload Workflow)



1.  **연결 (Link)**: `skills/workspace-governance/scripts/sync-skill.sh`를 실행한다. (최초 1회 또는 신규 스킬 추가 시)



2.  **기록 (Log)**: 스킬 내용 수정 시, `SKILL.md` 상단의 `description` 필드에 **상세 타임스탬프(YYYY-MM-DD HH:mm:ss)**와 변경 요약을 반드시 기록한다. 이는 `/skills list`를 통한 버전 검증의 기준이 된다.



3. **수정 (Edit)**: `skills/` 하위의 문서를 자유롭게 수정한다.



4. **반영 (Reload)**: Gemini CLI 대화창에서 `/skills reload`를 입력한다.







---







## 6. 스킬 현황 보고 표준 (Reporting Format)







사용자가 "스킬스 싱크?" 혹은 "현황 보고" 요청 시, 에이전트는 아래의 **표준 테이블 양식**을 사용하여 현재 메모리에 로드된 지식 상태를 보고해야 한다.







| 스킬명 (Skill Name) | 로드된 버전 (Timestamp) | 상태 (Status) | 비고 (Notes) |



| :--- | :--- | :--- | :--- |



| workspace-governance | 2026-02-06 18:05:32 | ✅ LOADED | 최신 링크 체계 적용됨 |



| ... | ... | ... | ... |











---

## 5. 문서 사이트 (GitHub Pages) 관리 표준

문서는 "작성하는 것"보다 "쉽게 찾아볼 수 있게 관리하는 것"이 더 중요하다. 모든 문서는 Docsify 기반의 GitHub Pages를 통해 실시간으로 공유된다.

### 운영 원칙
1.  **가시성 보장 (Visibility)**: 새로 생성된 모든 기술 문서(`.md`)는 반드시 `sidebar-manifest.md`에 등록되어야 한다. 등록되지 않은 문서는 "존재하지 않는 문서"로 간주한다.
2.  **경로 무결성 (Path Integrity)**: 사이드바 링크는 반드시 **루트 기준 절대 경로(`/` 시작)**를 사용한다. (예: `[제목](/workspace/...)`)
3.  **정적 자원 보호**: `index.html`과 `.nojekyll` 파일은 사이트 구동의 핵심이므로 임의로 수정하거나 삭제하지 않는다.
4.  **현행화 동기화**: `task.md`의 상태가 변경되거나 새로운 `knowledge`가 추가될 때, 사이드바의 구조가 논리적으로 타당한지 검토하고 필요시 재배치한다.

### 사이드바(sidebar-manifest.md) 작성 규격
*   **프로젝트 단위 그룹화**: 각 마이크로서비스나 독립 모듈별로 섹션을 분리한다.
*   **중요도 순 배치**: Roadmap, Task 등 현재 진행 상황을 알 수 있는 문서를 상단에 배치한다.
*   **계층 구조**: 들여쓰기(2 spaces)를 사용하여 논리적 깊이를 표현한다.

