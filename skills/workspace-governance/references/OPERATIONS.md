# ⚙️ 운영 및 자동화 표준 (Operations & Automation Standards)

> **Core Philosophy**: "복잡한 수동 명령어를 지양하고, 모든 운영 작업은 명문화된 스크립트와 Makefile을 통해 수행한다."

---

## 1. Makefile 운영 원칙 (Makefile Standards)

명령어 추상화와 자동화를 위해 각 서비스의 루트 디렉토리에 `Makefile`을 배치한다.

*   **배치 위치**: 전사 공통 작업은 프로젝트 루트에, **개별 서비스 전용 작업은 각 서비스 루트**(`workspace/apps/{service}/`)에 Makefile을 둔다.
*   **진입점 일원화**: 빌드, 테스트, 배포, 권한 설정 등은 개별 명령어를 외울 필요 없이 `make [명령어]` 체계로 관리한다.
*   **Help 제공**: `make help` (또는 기본 `make`) 실행 시 가용한 모든 명령어 리스트와 설명을 출력해야 한다.
*   **추상화**: 복잡한 `docker-compose` 명령어 나 `curl` 명령 등은 사용자가 알 필요 없게 Makefile 뒤로 숨긴다.

---

## 2. 스크립트 관리 표준 (Scripting Standards)

모든 스크립트는 `scripts/` 폴더 하위의 용도별 디렉토리에 관리한다.

### 폴더 분류 체계
*   **`api/`**: 쉘 스크립트(.sh) 기반의 자동화 테스트.
*   **`http/`**: IDE용 HTTP Client(.http) 기반의 개발자 실시간 테스트.
*   **`bench/`**: 성능 및 부하 테스트.
*   **`common/`**: 공통 환경 변수(`env.sh`).

### 스크립트 작성 필수 요건
1.  **가이드 주석 필수**: [목적, 설정 안내, 필수 환경] 명시.
2.  **테스트 격리 및 자가 완결성 (Self-Contained)**: 
    *   테스트 실행 전 **필요한 데이터(유저 등)를 API로 직접 생성**한다.
    *   테스트 종료 후 **생성된 데이터를 삭제(Cleanup)**하여 DB 정합성을 유지한다.
3.  **설정의 중앙화**: `scripts/common/env.sh` 사용.
4.  **가시성 확보**: 실행 직후 현재 환경 변수값 출력.


---

## 3. 권한 및 실행 표준 (Execution)

*   **자동 권한 부여**: 신규 스크립트 추가 시 `make setup` 명령어에 `chmod +x` 로직을 추가하여 팀원이 즉시 사용할 수 있게 한다.
*   **경로 독립성**: `$(dirname "$0")` 등을 사용하여 스크립트가 어디서 호출되든 파일 시스템 경로 문제가 발생하지 않도록 한다.
